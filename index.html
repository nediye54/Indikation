<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MDG – In wenigen Minuten zur Entscheidungssicherheit</title>
  <meta name="description" content="Instabilität früh erkennen. Ursache präzise diagnostizieren. Tragfähige Architektur bauen – bevor es bricht." />
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

<header class="header">
  <div class="container header__inner">
    <div class="brand">
      <span class="brand__mark">MDG</span>
      <span>v4</span>
    </div>

    <nav class="nav">
      <a class="nav__link" href="#how">Wie es funktioniert</a>
      <a class="nav__link" href="#why">Warum MDG</a>
      <a class="nav__link" href="#faq">FAQ</a>
    </nav>
  </div>
</header>

<section class="section section--hero">
  <div class="container hero">

    <div>
      <h1 class="h1">
        Instabilität früh erkennen.<br>
        Ursache präzise diagnostizieren.<br>
        Architektur bauen, bevor es bricht.
      </h1>

      <p class="lead">
        MDG, IDG und ADG geben dir ein strukturelles Instrumentarium,
        um Spannungen sichtbar zu machen und tragfähige Entscheidungen zu treffen.
      </p>

      <div class="hero__cta">
        <button id="cta_private" class="btn btn--primary">
          Jetzt ermitteln (privat)
        </button>

        <button id="cta_business" class="btn btn--ghost">
          Für Unternehmen
        </button>
      </div>

      <p class="micro" style="margin-top:14px;">
        Privat: sofort starten. Business: Token erforderlich.
      </p>
    </div>

  </div>
</section>

<!-- ============================= -->
<!-- HOW IT WORKS -->
<!-- ============================= -->
<section id="how" class="section">
  <div class="container">
    <div class="section__head">
      <h2 class="h2">Wie es funktioniert</h2>
      <p class="sub">
        MDG macht aus diffusen Situationen ein entscheidungsreifes Strukturbild – schnell genug für den Alltag,
        präzise genug für Verantwortung.
      </p>
    </div>

    <div class="grid">
      <div class="card">
        <h3 class="h3">Schritt 1 — Situation definieren</h3>
        <p class="micro">
          Ein Satz genügt. Das System verankert sich an „was passiert“ statt an langen Erzählungen.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Schritt 2 — Ziel wählen</h3>
        <p class="micro">
          Stabilisieren = Spannung sofort senken. Umbauen = Struktur verändern, damit Bruch sich nicht wiederholt.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Schritt 3 — Quick Scan</h3>
        <p class="micro">
          Wenige Signale zeigen die Architektur: Last, Entscheidungen, Energie/Fehlerintegration, Wachstum, Macht–Verantwortung.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Schritt 4 — Präzisionsfragen</h3>
        <p class="micro">
          Adaptive Folgefragen reduzieren Mehrdeutigkeit und erhöhen Präzision — Output wird handlungsfähig, nicht generisch.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Schritt 5 — Output</h3>
        <p class="micro">
          Du erhältst Primärinstabilität, Ursachenlogik, Frühindikatoren, Sofortmaßnahmen und Umbaupfad.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Schritt 6 — Executive Report (Premium)</h3>
        <p class="micro">
          Verdichtete „Partner-Note“: Entscheidungen, Operating Rhythm, Rollen, Constraints und ein 30–60–90 Plan.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- ============================= -->
<!-- WHY MDG -->
<!-- ============================= -->
<section id="why" class="section">
  <div class="container">
    <div class="section__head">
      <h2 class="h2">Warum MDG</h2>
      <p class="sub">
        Systeme scheitern selten an mangelnder Stärke — sie scheitern an falscher Architektur.
      </p>
    </div>

    <div class="grid">
      <div class="card">
        <h3 class="h3">Architektur statt Symptome</h3>
        <p class="micro">
          MDG „motiviert“ nicht. Es diagnostiziert Struktur: wo Last kippt, wo Entscheidungen hängen, wo Wachstum Fragilität verstärkt.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Entscheidungssicherheit in Minuten</h3>
        <p class="micro">
          Ziel ist nicht ein langer Text — sondern eine klare Entscheidung: was jetzt stabilisieren, was als nächstes umbauen.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Frühindikatoren</h3>
        <p class="micro">
          Du erhältst messbare Signale, ob das System besser wird — bevor die nächste Krise dich dazu zwingt.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Business ≠ Privat</h3>
        <p class="micro">
          Business ist nicht „Privat mit anderen Worten“. Business-Modus arbeitet mit Governance, Rollen, Taktung, KPIs, Operating Model.
        </p>
      </div>

      <div class="card">
        <h3 class="h3">Praktisch statt theoretisch</h3>
        <p class="micro">
          Output ist zum Nutzen gebaut: Schritte, Reihenfolge, Ownership, Trade-offs — nicht abstrakte Philosophie.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- ============================= -->
<!-- FAQ -->
<!-- ============================= -->
<section id="faq" class="section">
  <div class="container">
    <div class="section__head">
      <h2 class="h2">FAQ</h2>
    </div>

    <div class="faq">
      <details class="card">
        <summary class="h3">Ist das Therapie, Coaching oder Consulting?</summary>
        <p class="micro">
          Keines davon. MDG ist ein strukturelles Diagnose-Instrument: es identifiziert Instabilitäten und liefert entscheidungsreife Maßnahmen.
        </p>
      </details>

      <details class="card">
        <summary class="h3">Was bekomme ich konkret?</summary>
        <p class="micro">
          Primärinstabilität, Ursachenlogik, Frühindikatoren, Sofortmaßnahmen und Umbaupfad. Premium ergänzt den Executive Report.
        </p>
      </details>

      <details class="card">
        <summary class="h3">Warum Folgefragen?</summary>
        <p class="micro">
          Präzision entsteht durch Constraints. Folgefragen reduzieren Mehrdeutigkeit und verhindern generische Antworten.
        </p>
      </details>

      <details class="card">
        <summary class="h3">Was ist der Unterschied Business vs Privat?</summary>
        <p class="micro">
          Business nutzt Managementlogik: Entscheidungsrechte, Governance, Operating Rhythm, Rollen/Ownership, Anreize und messbare Outcomes.
        </p>
      </details>

      <details class="card">
        <summary class="h3">Brauche ich einen Token?</summary>
        <p class="micro">
          Privat startet sofort. Business ist token-basiert, weil es ein separates Fragen-Set und Executive Output enthält.
        </p>
      </details>

      <details class="card">
        <summary class="h3">Wie wird Datenschutz gehandhabt?</summary>
        <p class="micro">
          Inputs werden über API verarbeitet, um Assessment/Report zu generieren. Kein Marketing-Profiling. Keine unnötige Speicherung.
        </p>
      </details>
    </div>
  </div>
</section>

<!-- ============================= -->
<!-- BUSINESS MODAL -->
<!-- ============================= -->

<div id="business_overlay"></div>

<div id="business_modal" class="modal">
  <div class="modal__card">

    <div class="modal__head">
      <div>
        <div class="pill pill--muted">Business Zugang</div>
        <h3 style="margin-top:10px;">Token eingeben</h3>
      </div>

      <button id="business_close" class="btn btn--ghost">✕</button>
    </div>

    <p class="p">
      Unternehmen erhalten ein eigenes Fragen-Set
      und Executive Output. Bitte Token eingeben.
    </p>

    <label class="dx-label">Token</label>
    <input id="business_token" class="dx-input" placeholder="MDG-XXXX-XXXX" />

    <div style="display:flex; gap:10px; margin-top:20px;">
      <button id="business_submit" class="btn btn--primary">Weiter</button>
      <button id="business_cancel" class="btn btn--ghost">Abbrechen</button>
    </div>

  </div>
</div>

<!-- ============================= -->
<!-- SCRIPT -->
<!-- ============================= -->

<script>
(() => {

  const API_BASE = "https://api.mdg-indikation.de";

  // ✅ Diagnose.html expects:
  // sessionStorage.setItem("mdg_business_ok","1")
  // sessionStorage.setItem("mdg_business_token", "<TOKEN>")
  const K_BUSINESS_OK    = "mdg_business_ok";
  const K_BUSINESS_TOKEN = "mdg_business_token";

  const modal   = document.getElementById("business_modal");
  const overlay = document.getElementById("business_overlay");

  const openBtn    = document.getElementById("cta_business");
  const privateBtn = document.getElementById("cta_private");

  const closeBtn   = document.getElementById("business_close");
  const cancelBtn  = document.getElementById("business_cancel");
  const submitBtn  = document.getElementById("business_submit");
  const tokenInput = document.getElementById("business_token");

  function openModal(){
    modal.style.display = "flex";
    overlay.style.display = "block";
    tokenInput.focus();
  }

  function closeModal(){
    modal.style.display = "none";
    overlay.style.display = "none";
  }

  // ---------- PRIVATE FLOW ----------
  privateBtn.addEventListener("click", (e)=>{
    e.preventDefault();

    // ✅ Clear business session to avoid “sticky business”
    sessionStorage.removeItem(K_BUSINESS_OK);
    sessionStorage.removeItem(K_BUSINESS_TOKEN);

    window.location.href = "diagnose.html?mode=private";
  });

  // ---------- BUSINESS FLOW ----------
  openBtn.addEventListener("click", (e)=>{
    e.preventDefault();
    openModal();
  });

  // ---------- CLOSE OPTIONS ----------
  closeBtn.addEventListener("click", closeModal);
  cancelBtn.addEventListener("click", closeModal);
  overlay.addEventListener("click", closeModal);

  document.addEventListener("keydown",(e)=>{
    if(e.key === "Escape") closeModal();
  });

  // ---------- SUBMIT TOKEN ----------
  async function verifyBusinessTokenAndGo(){
    const token = (tokenInput.value || "").trim();
    if(!token){
      alert("Bitte Token eingeben.");
      return;
    }

    try{
      const res = await fetch(API_BASE + "/api/token/verify",{
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ token })
      });

      const data = await res.json().catch(() => ({}));

      if(!res.ok || !data?.ok){
        alert("Token ungültig.");
        return;
      }

      // ✅ Persist business session + token for diagnose.html
      sessionStorage.setItem(K_BUSINESS_OK, "1");
      sessionStorage.setItem(K_BUSINESS_TOKEN, token);

      closeModal();

      // ✅ Go to business diagnose
      window.location.href = "diagnose.html?mode=business";

    }catch(err){
      alert("Serverfehler.");
    }
  }

  submitBtn.addEventListener("click", verifyBusinessTokenAndGo);

  // Enter submits as well
  tokenInput.addEventListener("keydown", (e)=>{
    if(e.key === "Enter") verifyBusinessTokenAndGo();
  });

})();
</script>

</body>
</html>
