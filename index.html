<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Indikation – nach der Moral des Gleichgewichts</title>

  <!-- Cache busting -->
  <link rel="stylesheet" href="style.css?v=43" />
  <script src="script.js?v=43" defer></script>
</head>

<body>
  <main class="wrap">
    <header class="hero">
      <h1>Indikation</h1>
      <p class="sub">nach der Moral des Gleichgewichts</p>
      <p class="path">Quick Scan (24) → Deep Dive → stabilisierende Indikation</p>
    </header>

    <section id="errorBox" class="errorBox hidden" role="alert" aria-live="polite">
      <strong>Hinweis:</strong> Ein Script-Fehler wurde abgefangen. Bitte Seite neu laden (ggf. privater Modus).
    </section>

    <section class="card">
      <div class="cardHead">
        <h2>Quick Scan</h2>
        <p class="muted">
          Beantworte jede Frage mit einer von drei Optionen. Danach erhältst du: Radar, Balken, schwächste Variable, Zeitfenster.
        </p>
      </div>

      <div id="questions" class="questions"></div>

      <div class="actions">
        <button id="btnEval" class="btn primary" type="button">Auswerten</button>
        <button id="btnReset" class="btn" type="button">Zurücksetzen</button>
      </div>
    </section>

    <section id="results" class="card hidden">
      <div class="cardHead">
        <h2>Ergebnis</h2>
        <p class="muted">Radar, Balken, schwächste Variable, Zeitfenster.</p>
      </div>

      <div class="grid2">
        <div class="panel">
          <h3 class="panelTitle">Radar</h3>
          <div id="plot3d" class="plot3d" aria-label="Radar-Koordinatensystem"></div>
          <div class="plotHint">Radar-Profil: niedrig = innen, hoch = außen · Pfeil = schwächste Variable</div>
        </div>

        <div class="panel">
          <h3 class="panelTitle">Bars</h3>
          <div id="bars" class="bars"></div>

          <div class="divider"></div>

          <h3 class="panelTitle">Schwächste Variable</h3>
          <div id="weakest" class="weakest"></div>

          <div class="divider"></div>

          <h3 class="panelTitle">Zeitfenster</h3>
          <div id="timewin" class="timewin"></div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="deepDive">
        <div class="deepDiveHead">
          <h3 class="panelTitle">Deep Dive</h3>
          <p class="muted">
            Privat ist frei & stark. Business ist ausführlicher und tokenbasiert freigeschaltet.
          </p>
        </div>

        <a
  href="https://mdg-indikation.lemonsqueezy.com/checkout/buy/5077cf20-74fd-4d8e-b875-451c057ad61c?media=0&logo=0&enabled=1290055"
  target="_blank"
  rel="noopener noreferrer"
  class="buy-btn"
>
  Business Token kaufen
</a>

<style>
.buy-btn {
  display: inline-block;
  padding: 14px 22px;
  background: #111;
  color: #fff;
  border-radius: 10px;
  text-decoration: none;
  font-weight: 600;
  letter-spacing: 0.3px;
}
.buy-btn:hover {
  opacity: 0.85;
}
</style>
        
        <!-- MODE SWITCH -->
        <div class="modeRow">
          <div class="modeLabel muted">Modus</div>
          <div class="seg" role="tablist" aria-label="Deep Dive Modus">
            <button id="modePrivate" class="segBtn active" type="button" role="tab" aria-selected="true">Privat</button>
            <button id="modeBusiness" class="segBtn" type="button" role="tab" aria-selected="false">Business</button>
          </div>
          <div class="modeHint muted" id="modeHint">Privat: frei · Business: Token erforderlich</div>
        </div>

        <!-- TOKEN (nur Business) -->
        <div id="tokenRow" class="tokenRow hidden">
          <label class="muted" for="tokenInput">Token</label>
          <input id="tokenInput" class="tokenInput" type="text" placeholder="z.B. 9f2a1b3c4d5e6f7a" autocomplete="off" />
          <button id="tokenApply" class="btn" type="button">Anwenden</button>
          <div class="tokenSmall muted">Token = Ticket für Business Deep Dive.</div>
        </div>

        <button id="deepDiveBtn" class="btn ddBtn" type="button">Stabilisierende Indikation erzeugen</button>

        <!-- Output -->
        <div id="deepDiveOut" class="box ddOut" style="display:none;"></div>

        <div class="divider"></div>

        <!-- Quick Übersicht (statt “Deep Dive max. 3 Variablen”) -->
        <div class="deepDiveMini">
          <h4 class="miniTitle">Quick-Übersicht (3 schwächste)</h4>
          <div id="deepDive" class="deepDiveBody"></div>
        </div>
      </div>
    </section>

    <footer class="foot muted">
      v2 · Vanilla · Dark UI · 3 Antwortstufen
    </footer>
  </main>
</body>
</html>
