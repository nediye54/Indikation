<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Indikation – nach der Moral des Gleichgewichts</title>

  <!-- Cache busting -->
  <link rel="stylesheet" href="style.css?v=12" />
  <script src="script.js?v=12" defer></script>
</head>

<body>
  <main class="wrap">
    <header class="hero">
      <h1>Indikation</h1>
      <p class="sub" id="subtitle">nach der Moral des Gleichgewichts</p>
      <p class="path" id="pathline">Quick Scan (24) → Deep Dive (optional) → stabilisierende Indikation</p>
    </header>

    <!-- Error Box -->
    <section id="errorBox" class="errorBox hidden" role="alert" aria-live="polite"></section>

    <!-- Language selector (TOP) -->
    <section class="card">
      <div class="row topRow">
        <label class="muted" for="language" id="langLabel">Sprache</label>
        <select id="language">
          <option value="de" selected>Deutsch</option>
          <option value="en">English</option>
          <option value="fr">Français</option>
          <option value="es">Español</option>
          <option value="tr">Türkçe</option>
        </select>
      </div>
    </section>

    <!-- Quick Scan -->
    <section class="card">
      <div class="cardHead">
        <h2 id="quickScanTitle">Quick Scan</h2>
        <p class="muted" id="quickScanHint">
          Beantworte jede Frage. Danach erhältst du: Koordinatensystem + Balken + schwächste Variable + Zeitfenster.
        </p>
      </div>

      <div id="questions" class="questions"></div>

      <div class="actions">
        <button id="btnEval" class="btn primary" type="button">Auswerten</button>
        <button id="btnReset" class="btn" type="button">Zurücksetzen</button>
      </div>
    </section>

    <!-- Results -->
    <section id="results" class="card hidden">
      <div class="cardHead">
        <h2 id="resultTitle">Ergebnis</h2>
        <p class="muted" id="resultHint">Koordinatensystem (Radar), Balken, schwächste Variable, Zeitfenster.</p>
      </div>

      <div class="grid2">
        <div class="panel">
          <h3 class="panelTitle" id="radarTitle">Koordinatensystem</h3>

          <div class="radarWrap">
            <canvas id="radarCanvas" width="760" height="520" aria-label="Radar Chart"></canvas>
          </div>

          <p class="small muted" id="radarLegend">
            Radar-Profil: niedrig = innen, hoch = außen · Pfeil = schwächste Variable
          </p>
        </div>

        <div class="panel">
          <h3 class="panelTitle" id="barsTitle">Balken</h3>
          <div id="bars" class="bars"></div>

          <div class="divider"></div>

          <h3 class="panelTitle" id="weakestTitle">Schwächste Variable</h3>
          <div id="weakest" class="weakest"></div>

          <div class="divider"></div>

          <h3 class="panelTitle" id="timewinTitle">Zeitfenster</h3>
          <div id="timewin" class="timewin"></div>
        </div>
      </div>
    </section>

    <!-- Deep Dive -->
    <section class="card" id="deepDiveCard">
      <h3 id="deepDiveTitle">Deep Dive</h3>
      <p class="muted" id="deepDiveHint">Optional: Wenn du willst, erzeugt der Worker eine stabilisierende Indikation.</p>

      <div class="row">
        <label class="muted" for="timeframe" id="timeframeLabel">Zeitfenster</label>
        <select id="timeframe">
          <option value="heute" selected>heute</option>
          <option value="7tage">7 Tage</option>
          <option value="30tage">30 Tage</option>
        </select>
      </div>

      <button id="deepDiveBtn" class="btn" type="button">Stabilisierende Indikation erzeugen</button>

      <div id="deepDiveOut" class="box" style="display:none; white-space:pre-wrap;"></div>
    </section>

    <footer class="foot muted" id="footerLine">v2 · Vanilla · Dark UI · 3 Antwortstufen</footer>
  </main>
</body>
</html>
