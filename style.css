// ------------------------------------------------------------
// Robustheit (mobil): "Script error" abfangen statt White Screen
// ------------------------------------------------------------
window.addEventListener("error", (e) => {
  const box = document.getElementById("statusBox");
  if (box) {
    box.textContent = "Hinweis: Ein Skript-Fehler wurde abgefangen. Bitte Seite neu laden (ggf. privater Modus).";
    box.style.display = "block";
  }
  console.warn("Global error caught:", e?.message || e);
});

// ------------------------------------------------------------
// Modell: 8 Variablen (Reihenfolge wie von dir festgelegt)
// ------------------------------------------------------------
const VARIABLES = [
  { key: "freiheit", label: "Freiheit" },
  { key: "gerechtigkeit", label: "Gerechtigkeit" },
  { key: "effizienz", label: "Effizienz" },
  { key: "wahrheit", label: "Wahrheit" },
  { key: "harmonie", label: "Harmonie" },
  { key: "mittel", label: "Mittel" },
  { key: "handlungsspielraum", label: "Handlungsspielraum" },
  { key: "balance", label: "Balance" },
];

// ------------------------------------------------------------
// Antworten: exakt 3 Optionen (0.2 / 0.5 / 0.8)
// ------------------------------------------------------------
const ANSWERS = [
  { value: 0.2, label: "unklar / schwach" },
  { value: 0.5, label: "teils / gemischt" },
  { value: 0.8, label: "klar / stark" },
];

// ------------------------------------------------------------
// Fragen: 24 (3 pro Variable)
// -> Du kannst Texte später leicht austauschen (nur Strings)
// ------------------------------------------------------------
const QUESTIONS = [
  // Freiheit
  { v: "freiheit", t: "Wie frei kannst du in deinem Alltag Entscheidungen treffen, ohne Angst vor Konsequenzen?" },
  { v: "freiheit", t: "Wie oft fühlst du dich in Rollen oder Erwartungen gefangen, die du nicht gewählt hast?" },
  { v: "freiheit", t: "Kannst du Grenzen setzen, ohne danach Schuldgefühle oder Druck zu spüren?" },

  // Gerechtigkeit
  { v: "gerechtigkeit", t: "Werden in deinem Umfeld Belastungen und Vorteile grundsätzlich fair verteilt?" },
  { v: "gerechtigkeit", t: "Werden Konflikte so geklärt, dass sich niemand dauerhaft übergangen fühlt?" },
  { v: "gerechtigkeit", t: "Fühlt sich Anerkennung (Respekt, Zeit, Aufmerksamkeit) bei euch grundsätzlich gerecht an?" },

  // Effizienz
  { v: "effizienz", t: "Werden Probleme bei euch eher praktisch gelöst als endlos diskutiert?" },
  { v: "effizienz", t: "Gelingt es, Pläne umzusetzen, ohne dass dabei Beziehungen leiden?" },
  { v: "effizienz", t: "Wie oft führt „Optimierung“ bei euch zu Stress statt Entlastung?" },

  // Wahrheit
  { v: "wahrheit", t: "Werden schwierige Themen bei euch offen angesprochen, statt umgangen?" },
  { v: "wahrheit", t: "Kannst du ehrlich sein, ohne dass es sofort eskaliert?" },
  { v: "wahrheit", t: "Wie zuverlässig stimmen Worte und Taten in deinem Umfeld überein?" },

  // Harmonie
  { v: "harmonie", t: "Fühlst du dich in deinem Alltag emotional eher getragen als ausgelaugt?" },
  { v: "harmonie", t: "Gibt es in deinem Umfeld spürbar mehr Ruhe als Spannung?" },
  { v: "harmonie", t: "Kannst du dich erholen, ohne dass sofort neue Konflikte entstehen?" },

  // Mittel
  { v: "mittel", t: "Hast du ausreichend Ressourcen (Zeit, Geld, Energie), um stabil zu handeln?" },
  { v: "mittel", t: "Wie oft führen fehlende Mittel bei euch zu Streit oder Druck?" },
  { v: "mittel", t: "Kannst du Mittel so einsetzen, dass sie wirklich entlasten (statt nur kurzfristig)?" },

  // Handlungsspielraum
  { v: "handlungsspielraum", t: "Gibt es bei euch realistische Optionen, wenn etwas schief läuft?" },
  {
