<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kontakt – MDG</title>
  <meta name="description" content="Kontakt zu MDG" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,400;0,500;1,400&family=Outfit:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./style.css" />
  <style>
    .page{ max-width:860px; margin:0 auto; padding:1.75rem 1.25rem 4rem; }
    .two{ display:grid; grid-template-columns:1fr 1fr; gap:1rem; }
    @media (max-width:720px){ .two{ grid-template-columns:1fr; } }

    /* Form */
    .form{ display:grid; gap:.6rem; }
    .form__label{ font-weight:800; font-size:.78rem; letter-spacing:.06em; text-transform:uppercase; color:var(--muted-2); margin-top:.2rem; }
    .form__input{
      width:100%;
      padding:.75rem .9rem;
      border-radius:12px;
      border:1px solid var(--stroke);
      background:var(--bg-2);
      color:var(--text);
      font-family:var(--font-body);
      font-size:.95rem;
      outline:none;
      transition:border-color .15s, box-shadow .15s;
    }
    .form__input:focus{
      border-color:var(--primary);
      box-shadow:0 0 0 3px var(--glow-green);
    }
    textarea.form__input{ resize:vertical; }
    .form__check{
      display:flex; gap:.6rem; align-items:flex-start;
      color:var(--muted); font-size:.9rem; margin:.2rem 0 .4rem;
    }
    .form__check a{ color:var(--primary); }

    /* Status message */
    .form__status{
      display:none;
      padding:.75rem 1rem;
      border-radius:10px;
      font-size:.9rem;
      font-weight:600;
      margin-top:.2rem;
    }
    .form__status--ok{
      background:rgba(110,231,183,.12);
      border:1px solid rgba(110,231,183,.3);
      color:#6ee7b7;
    }
    .form__status--err{
      background:rgba(239,68,68,.1);
      border:1px solid rgba(239,68,68,.3);
      color:#f87171;
    }
  </style>
</head>
<body>

<header class="header" id="top">
  <div class="container header__inner">
    <a class="brand" href="./index.html" aria-label="Home">
      <span class="brand__mark" aria-hidden="true">MDG</span>
    </a>

    <nav class="nav" aria-label="Main">
      <a class="nav__link" href="./how.html">Wie es funktioniert</a>
      <a class="nav__link" href="./why.html">Warum MDG</a>
      <a class="nav__link" href="./faq.html">FAQ</a>
    </nav>

    <div class="header__actions">
      <a class="btn btn--ghost" href="./index.html">Home</a>
    </div>

    <button class="burger" type="button" aria-label="Menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>

  <div class="drawer" hidden>
    <div class="drawer__content">
      <a class="drawer__link" href="./how.html">Wie es funktioniert</a>
      <a class="drawer__link" href="./why.html">Warum MDG</a>
      <a class="drawer__link" href="./faq.html">FAQ</a>
      <div class="drawer__sep"></div>
      <a class="btn btn--ghost btn--full" href="./index.html">Home</a>
    </div>
  </div>
</header>

<main id="main">
  <div class="page">
    <div class="section__head">
      <h1 class="h2">Kontakt</h1>
      <p class="sub">Schreibe uns. Wir antworten strukturiert.</p>
    </div>

    <div class="two">
      <div class="card">
        <h2 class="h3">Direkt</h2>
        <p class="p">
          E-Mail: <a href="mailto:info@mdg-indikation.de">info@mdg-indikation.de</a><br />
          Telefon: 016091489988
        </p>
        <p class="micro">Für Anfragen stehen wir gerne zur Verfügung.</p>
      </div>

      <div class="card">
        <h2 class="h3">Kontaktformular</h2>
        <form class="form" id="contactForm">
          <label class="form__label" for="name">Name</label>
          <input class="form__input" id="name" name="name" type="text" placeholder="Dein Name" autocomplete="name" />

          <label class="form__label" for="email">E-Mail</label>
          <input class="form__input" id="email" name="email" type="email" placeholder="name@domain.com" autocomplete="email" required />

          <label class="form__label" for="topic">Thema</label>
          <select class="form__input" id="topic" name="topic">
            <option value="Allgemein">Allgemein</option>
            <option value="IDG (Stabilisierung)">IDG (Stabilisierung)</option>
            <option value="ADG (Architektur)">ADG (Architektur)</option>
            <option value="Business / Token">Business / Token</option>
          </select>

          <label class="form__label" for="message">Nachricht</label>
          <textarea class="form__input" id="message" name="message" rows="5" placeholder="Kurz: System, Problem, Ziel." required></textarea>

          <label class="form__check">
            <input type="checkbox" id="privacy" required />
            <span>Ich habe die <a href="./datenschutz.html">Datenschutzerklärung</a> gelesen.</span>
          </label>

          <div class="form__status" id="formStatus"></div>

          <button class="btn btn--primary" type="submit" id="submitBtn">Senden</button>
        </form>
      </div>
    </div>
  </div>
</main>

<footer class="footer">
  <div class="container footer__grid">
    <div>
      <div class="brand brand--footer">
        <span class="brand__mark" aria-hidden="true">MDG</span>
      </div>
      <p class="micro">Strukturdiagnose für Stabilisierung und Umbau.</p>
    </div>
    <div class="footer__legal">
      <a href="./impressum.html" rel="nofollow">Impressum</a>
      <a href="./datenschutz.html" rel="nofollow">Datenschutz</a>
      <a href="./kontakt.html" rel="nofollow">Kontakt</a>
    </div>
  </div>
</footer>

<script>
(() => {
  /* ── Burger menu ── */
  const burger = document.querySelector(".burger");
  const drawer = document.querySelector(".drawer");
  if (burger && drawer) {
    const open  = () => { drawer.hidden = false; burger.setAttribute("aria-expanded","true");  document.body.classList.add("no-scroll"); };
    const close = () => { drawer.hidden = true;  burger.setAttribute("aria-expanded","false"); document.body.classList.remove("no-scroll"); };
    burger.addEventListener("click", () => drawer.hidden ? open() : close());
    drawer.addEventListener("click", e => { if (!drawer.querySelector(".drawer__content").contains(e.target)) close(); });
    window.addEventListener("keydown", e => { if (e.key === "Escape") close(); });
  }

  /* ── Contact form ── */
  const WEB3FORMS_KEY = "3099d841-ee8e-48cc-a502-b9fcb7c60829";

  const form      = document.getElementById("contactForm");
  const status    = document.getElementById("formStatus");
  const submitBtn = document.getElementById("submitBtn");

  function showStatus(msg, isOk) {
    status.textContent = msg;
    status.className = "form__status " + (isOk ? "form__status--ok" : "form__status--err");
    status.style.display = "block";
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    submitBtn.disabled = true;
    submitBtn.textContent = "Wird gesendet…";
    status.style.display = "none";

    const payload = {
      access_key: WEB3FORMS_KEY,
      name:       document.getElementById("name").value.trim(),
      email:      document.getElementById("email").value.trim(),
      subject:    "[MDG Kontakt] " + document.getElementById("topic").value,
      message:    document.getElementById("message").value.trim(),
    };

    try {
      const res = await fetch("https://api.web3forms.com/submit", {
        method:  "POST",
        headers: { "Content-Type": "application/json", "Accept": "application/json" },
        body:    JSON.stringify(payload),
      });

      const data = await res.json().catch(() => ({}));

      if (res.ok && data.success) {
        showStatus("✓ Nachricht gesendet. Wir melden uns bald.", true);
        form.reset();
      } else {
        showStatus("Fehler: " + (data.message || "Unbekannter Fehler. Bitte versuche es erneut."), false);
      }
    } catch (err) {
      showStatus("Verbindungsfehler. Bitte versuche es erneut.", false);
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = "Senden";
    }
  });
})();
</script>
</body>
</html>
